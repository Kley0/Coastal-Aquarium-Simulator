<!DOCTYPE html>
<!-- saved from url=(0029)file:///D:/ky/Untitled-1.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coastal Aquarium Simulator</title>
  <script src="file:///D:/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Arial', sans-serif;
      background: radial-gradient(circle at 50% 50%, #003d5c 0%, #001426 100%);
      color: #ffffff;
      height: 100%;
      overflow: hidden;
    }
    
    * {
      box-sizing: border-box;
    }

    .game-wrapper {
      height: 100%;
      display: flex;
      flex-direction: column;
      padding: 20px;
      width: 100%;
      margin: 0 auto;
      object-fit: cover;
    }

    .top-bar {
      background: rgba(0, 50, 80, 0.9);
      padding: 15px 25px;
      border-radius: 15px;
      margin-bottom: 15px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
      border: 2px solid rgba(77, 208, 225, 0.3);
    }

    .game-title {
      margin: 0 0 12px 0;
      font-size: 26px;
      font-weight: bold;
      color: #4dd0e1;
      text-align: center;
      text-shadow: 0 0 10px rgba(77, 208, 225, 0.5);
    }

    .status-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 12px;
    }

    .status-box {
      background: rgba(0, 30, 50, 0.7);
      padding: 10px;
      border-radius: 10px;
      text-align: center;
      border: 2px solid rgba(100, 200, 255, 0.2);
    }

    .status-label {
      font-size: 11px;
      color: #80deea;
      margin-bottom: 5px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .status-number {
      font-size: 22px;
      font-weight: bold;
      color: #ffffff;
    }

    .main-game-area {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 15px;
      flex: 1;
      overflow: hidden;
    }

    .tank-section {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .aquarium-display {
      background: linear-gradient(to bottom, #004d7a 0%, #001a33 70%, #2d1810 100%);
      border-radius: 15px;
      border: 3px solid #1a4d7a;
      padding: 20px;
      position: relative;
      height: 400px;
      overflow: hidden;
      box-shadow: inset 0 0 50px rgba(0, 100, 150, 0.4), 0 8px 20px rgba(0, 0, 0, 0.4);
    }

    .tank-info {
      position: absolute;
      top: 15px;
      left: 15px;
      background: rgba(0, 0, 0, 0.6);
      padding: 10px 15px;
      border-radius: 8px;
      font-size: 13px;
      z-index: 10;
    }

    .water-layer {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(to bottom, transparent 0%, rgba(0, 100, 150, 0.1) 100%);
      animation: waterShimmer 4s ease-in-out infinite;
    }

    @keyframes waterShimmer {
      0%, 100% { opacity: 0.8; }
      50% { opacity: 1; }
    }

    .creature {
      position: absolute;
      font-size: 32px;
      transition: all 0.5s ease-out;
      cursor: pointer;
      filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.3));
      z-index: 5;
    }

    .creature:hover {
      transform: scale(1.2);
      filter: drop-shadow(0 6px 12px rgba(77, 208, 225, 0.6));
    }

    .plant {
      position: absolute;
      bottom: 0;
      font-size: 28px;
      z-index: 3;
      animation: sway 3s ease-in-out infinite;
    }

    @keyframes sway {
      0%, 100% { transform: rotate(-5deg); }
      50% { transform: rotate(5deg); }
    }

    .rock {
      position: absolute;
      bottom: 10px;
      font-size: 24px;
      z-index: 2;
    }

    .particle {
      position: absolute;
      width: 6px;
      height: 6px;
      background: rgba(255, 255, 255, 0.6);
      border-radius: 50%;
      animation: rise 4s linear infinite;
      z-index: 4;
    }

    @keyframes rise {
      0% {
        transform: translateY(0) translateX(0);
        opacity: 0.8;
      }
      100% {
        transform: translateY(-400px) translateX(20px);
        opacity: 0;
      }
    }

    .metrics-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      background: rgba(0, 50, 80, 0.9);
      padding: 15px;
      border-radius: 15px;
      border: 2px solid rgba(77, 208, 225, 0.3);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
    }

    .metric-card {
      background: rgba(0, 30, 50, 0.7);
      padding: 12px;
      border-radius: 10px;
      border: 2px solid rgba(100, 200, 255, 0.2);
    }

    .metric-title {
      font-size: 12px;
      color: #80deea;
      margin-bottom: 8px;
      text-transform: uppercase;
    }

    .metric-display {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .metric-value {
      font-size: 20px;
      font-weight: bold;
    }

    .metric-bar-container {
      height: 12px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 6px;
      overflow: hidden;
      border: 1px solid rgba(100, 200, 255, 0.3);
    }

    .metric-bar {
      height: 100%;
      transition: width 0.4s ease, background-color 0.4s ease;
      border-radius: 6px;
    }

    .bar-excellent { background: linear-gradient(90deg, #00e676, #00c853); }
    .bar-good { background: linear-gradient(90deg, #69f0ae, #00e676); }
    .bar-warning { background: linear-gradient(90deg, #ffd54f, #ffb300); }
    .bar-critical { background: linear-gradient(90deg, #ff6b6b, #d32f2f); }

    .control-panel {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .actions-container {
      background: rgba(0, 50, 80, 0.9);
      padding: 20px;
      border-radius: 15px;
      border: 2px solid rgba(77, 208, 225, 0.3);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
    }

    .actions-title {
      margin: 0 0 15px 0;
      font-size: 18px;
      color: #4dd0e1;
      text-align: center;
      font-weight: bold;
    }

    .action-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-bottom: 15px;
    }

    .action-button {
      background: linear-gradient(135deg, #0288d1 0%, #01579b 100%);
      color: white;
      border: none;
      padding: 15px 10px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 13px;
      font-weight: bold;
      transition: all 0.2s ease;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }

    .action-button:hover:not(:disabled) {
      background: linear-gradient(135deg, #0277bd 0%, #004d7a 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
    }

    .action-button:active:not(:disabled) {
      transform: translateY(0);
    }

    .action-button:disabled {
      background: linear-gradient(135deg, #424242 0%, #212121 100%);
      cursor: not-allowed;
      opacity: 0.5;
    }

    .action-icon {
      font-size: 24px;
    }

    .action-cost {
      font-size: 11px;
      color: #b3e5fc;
    }

    .day-advance-btn {
      background: linear-gradient(135deg, #00e676 0%, #00c853 100%);
      grid-column: 1 / -1;
      padding: 18px;
      font-size: 16px;
    }

    .day-advance-btn:hover:not(:disabled) {
      background: linear-gradient(135deg, #00c853 0%, #009624 100%);
    }

    .log-container {
      background: rgba(0, 50, 80, 0.9);
      padding: 15px;
      border-radius: 15px;
      border: 2px solid rgba(77, 208, 225, 0.3);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
      flex: 1;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .log-title {
      margin: 0 0 12px 0;
      font-size: 16px;
      color: #4dd0e1;
      font-weight: bold;
    }

    .log-messages {
      flex: 1;
      overflow-y: auto;
      display: flex;
      flex-direction: column-reverse;
    }

    .log-message {
      padding: 10px 12px;
      margin-bottom: 8px;
      border-radius: 8px;
      font-size: 13px;
      line-height: 1.5;
      border-left: 4px solid;
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .log-info {
      background: rgba(77, 208, 225, 0.15);
      border-color: #4dd0e1;
      color: #b3e5fc;
    }

    .log-success {
      background: rgba(0, 230, 118, 0.15);
      border-color: #00e676;
      color: #b9f6ca;
    }

    .log-warning {
      background: rgba(255, 193, 7, 0.15);
      border-color: #ffc107;
      color: #fff9c4;
    }

    .log-danger {
      background: rgba(244, 67, 54, 0.15);
      border-color: #f44336;
      color: #ffcdd2;
    }

    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.85);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal-content {
      background: linear-gradient(135deg, #1a237e 0%, #0d1642 100%);
      padding: 40px;
      border-radius: 20px;
      text-align: center;
      max-width: 500px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
      border: 3px solid #1a4d7a;
      animation: scaleIn 0.3s ease-out;
    }

    @keyframes scaleIn {
      from {
        transform: scale(0.8);
        opacity: 0;
      }
      to {
        transform: scale(1);
        opacity: 1;
      }
    }

    .modal-content.victory {
      background: linear-gradient(135deg, #1b5e20 0%, #0d3312 100%);
      border-color: #2e7d32;
    }

    .modal-title {
      margin: 0 0 20px 0;
      font-size: 36px;
      color: #4dd0e1;
      font-weight: bold;
    }

    .modal-content.victory .modal-title {
      color: #69f0ae;
    }

    .modal-text {
      margin: 0 0 30px 0;
      font-size: 18px;
      line-height: 1.6;
      color: #b3e5fc;
    }

    .modal-button {
      background: linear-gradient(135deg, #0288d1 0%, #01579b 100%);
      color: white;
      border: none;
      padding: 15px 40px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
      transition: all 0.2s ease;
    }

    .modal-button:hover {
      background: linear-gradient(135deg, #0277bd 0%, #004d7a 100%);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
    }

    .modal-button:active {
      transform: translateY(0);
    }

    @media (max-width: 1024px) {
      .main-game-area {
        grid-template-columns: 1fr;
      }
      
      .action-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (max-width: 768px) {
      .status-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .metrics-grid {
        grid-template-columns: 1fr;
      }
      
      .action-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="file:///D:/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="./Untitled-1_files/saved_resource" type="text/javascript"></script>
 <style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}</style><style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}</style><style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}</style></head>
 <body>
  <div class="game-wrapper">
   <div class="top-bar">
    <h1 class="game-title" id="game-title">üåä COASTAL AQUARIUM SIMULATOR üåä</h1>
    <div class="status-grid">
     <div class="status-box">
      <div class="status-label">
       Day
      </div>
      <div class="status-number" id="day-display">1</div>
     </div>
     <div class="status-box">
      <div class="status-label">
       Budget
      </div>
      <div class="status-number" id="budget-display">$500</div>
     </div>
     <div class="status-box">
      <div class="status-label">
       Comfort
      </div>
      <div class="status-number" id="comfort-display">75</div>
     </div>
     <div class="status-box">
      <div class="status-label">
       Health
      </div>
      <div class="status-number" id="health-display">75</div>
     </div>
     <div class="status-box">
      <div class="status-label">
       Cleanliness
      </div>
      <div class="status-number" id="cleanliness-display">80</div>
     </div>
    </div>
   </div>
   <div class="main-game-area">
    <div class="tank-section">
     <div class="aquarium-display" id="aquarium">
      <div class="tank-info">
       <div>
        üê† Marine Life: <span id="fish-count">5</span>
       </div>
       <div>
        ü™∏ Coral: <span id="coral-count">3</span>
       </div>
      </div>
      <div class="water-layer"></div>
     <div class="rock" style="left: 15%;">‚ö´</div><div class="rock" style="left: 40%;">‚¨õ</div><div class="rock" style="left: 65%;">‚óº</div><div class="rock" style="left: 90%;">‚¨õ</div><div class="plant" style="left: 10%; animation-delay: 0s;">ü™∏</div><div class="plant" style="left: 28%; animation-delay: 0.5s;">üå±</div><div class="plant" style="left: 46%; animation-delay: 1s;">üå±</div><div class="plant" style="left: 64%; animation-delay: 1.5s;">üåø</div><div class="plant" style="left: 82%; animation-delay: 2s;">üå±</div><div class="creature" data-index="0" style="left: 52.9264%; top: 39.7625px;">üê†</div><div class="creature" data-index="1" style="left: 32.9611%; top: 156.463px;">üêü</div><div class="creature" data-index="2" style="left: 18.836%; top: 57.328px;">üê°</div><div class="creature" data-index="3" style="left: 19.1457%; top: 166.678px;">ü¶à</div><div class="creature" data-index="4" style="left: 35.26%; top: 264.977px;">üêô</div><div class="particle" style="left: 5.22816%; bottom: 0px; animation-duration: 4.17293s;"></div><div class="particle" style="left: 92.9648%; bottom: 0px; animation-duration: 4.81461s;"></div><div class="particle" style="left: 39.8404%; bottom: 0px; animation-duration: 4.59082s;"></div><div class="particle" style="left: 32.2301%; bottom: 0px; animation-duration: 4.06286s;"></div><div class="particle" style="left: 9.45428%; bottom: 0px; animation-duration: 4.35211s;"></div><div class="particle" style="left: 85.3449%; bottom: 0px; animation-duration: 3.76537s;"></div><div class="particle" style="left: 76.921%; bottom: 0px; animation-duration: 4.51715s;"></div><div class="particle" style="left: 24.9522%; bottom: 0px; animation-duration: 4.81682s;"></div><div class="rock" style="left: 15%;">ü™®</div><div class="rock" style="left: 40%;">ü™®</div><div class="rock" style="left: 65%;">ü™®</div><div class="rock" style="left: 90%;">ü™®</div><div class="plant" style="left: 10%; animation-delay: 0s;">üå±</div><div class="plant" style="left: 28%; animation-delay: 0.5s;">ü™∏</div><div class="plant" style="left: 46%; animation-delay: 1s;">üå±</div><div class="plant" style="left: 64%; animation-delay: 1.5s;">ü™∏</div><div class="plant" style="left: 82%; animation-delay: 2s;">ü™∏</div><div class="creature" data-index="0" style="left: 45.7898%; top: 148.142px;">üê†</div><div class="creature" data-index="1" style="left: 23.7461%; top: 105.381px;">üêü</div><div class="creature" data-index="2" style="left: 23.1488%; top: 246.801px;">üê°</div><div class="creature" data-index="3" style="left: 77.7551%; top: 184.207px;">ü¶à</div><div class="creature" data-index="4" style="left: 26.1723%; top: 81.2884px;">üêô</div><div class="particle" style="left: 93.0289%; bottom: 0px; animation-duration: 4.44183s;"></div><div class="particle" style="left: 81.1749%; bottom: 0px; animation-duration: 3.9968s;"></div><div class="particle" style="left: 52.8612%; bottom: 0px; animation-duration: 3.4897s;"></div><div class="particle" style="left: 88.5767%; bottom: 0px; animation-duration: 4.10641s;"></div><div class="particle" style="left: 47.915%; bottom: 0px; animation-duration: 3.25081s;"></div><div class="particle" style="left: 77.8156%; bottom: 0px; animation-duration: 4.93947s;"></div><div class="particle" style="left: 13.0668%; bottom: 0px; animation-duration: 4.94818s;"></div><div class="particle" style="left: 76.1886%; bottom: 0px; animation-duration: 4.02144s;"></div><div class="rock" style="left: 15%;">ü™®</div><div class="rock" style="left: 40%;">ü™®</div><div class="rock" style="left: 65%;">ü™®</div><div class="rock" style="left: 90%;">ü™®</div><div class="plant" style="left: 10%; animation-delay: 0s;">üå±</div><div class="plant" style="left: 28%; animation-delay: 0.5s;">üå±</div><div class="plant" style="left: 46%; animation-delay: 1s;">üå±</div><div class="plant" style="left: 64%; animation-delay: 1.5s;">üå±</div><div class="plant" style="left: 82%; animation-delay: 2s;">üåø</div><div class="creature" data-index="0" style="left: 73.6688%; top: 213.506px;">üê†</div><div class="creature" data-index="1" style="left: 29.5741%; top: 148.185px;">üêü</div><div class="creature" data-index="2" style="left: 21.5057%; top: 76.3582px;">üê°</div><div class="creature" data-index="3" style="left: 22.581%; top: 233.902px;">ü¶à</div><div class="creature" data-index="4" style="left: 48.4978%; top: 50.5283px;">üêô</div><div class="particle" style="left: 26.1458%; bottom: 0px; animation-duration: 4.08744s;"></div><div class="particle" style="left: 48.0638%; bottom: 0px; animation-duration: 4.38838s;"></div><div class="particle" style="left: 9.62635%; bottom: 0px; animation-duration: 4.41731s;"></div><div class="particle" style="left: 46.0728%; bottom: 0px; animation-duration: 4.81634s;"></div><div class="particle" style="left: 10.5312%; bottom: 0px; animation-duration: 4.98026s;"></div><div class="particle" style="left: 53.1058%; bottom: 0px; animation-duration: 4.81303s;"></div><div class="particle" style="left: 74.695%; bottom: 0px; animation-duration: 4.32177s;"></div><div class="particle" style="left: 41.4555%; bottom: 0px; animation-duration: 3.41643s;"></div></div>
     <div class="metrics-grid">
      <div class="metric-card">
       <div class="metric-title">
        üíß Salinity
       </div>
       <div class="metric-display"><span class="metric-value" id="salinity-val">35.0</span> <span style="font-size: 11px; color: #80deea;">ppt</span>
       </div>
       <div class="metric-bar-container">
        <div class="metric-bar bar-excellent" id="salinity-bar" style="width: 50%;"></div>
       </div>
      </div>
      <div class="metric-card">
       <div class="metric-title">
        üí® Oxygen
       </div>
       <div class="metric-display"><span class="metric-value" id="oxygen-val">7.0</span> <span style="font-size: 11px; color: #80deea;">mg/L</span>
       </div>
       <div class="metric-bar-container">
        <div class="metric-bar bar-excellent" id="oxygen-bar" style="width: 40%;"></div>
       </div>
      </div>
      <div class="metric-card">
       <div class="metric-title">
        ‚ò†Ô∏è Ammonia
       </div>
       <div class="metric-display"><span class="metric-value" id="ammonia-val">0.1</span> <span style="font-size: 11px; color: #80deea;">ppm</span>
       </div>
       <div class="metric-bar-container">
        <div class="metric-bar bar-excellent" id="ammonia-bar" style="width: 10%;"></div>
       </div>
      </div>
      <div class="metric-card">
       <div class="metric-title">
        üå°Ô∏è Temperature
       </div>
       <div class="metric-display"><span class="metric-value" id="temp-val">25.0</span> <span style="font-size: 11px; color: #80deea;">¬∞C</span>
       </div>
       <div class="metric-bar-container">
        <div class="metric-bar bar-excellent" id="temp-bar" style="width: 50%;"></div>
       </div>
      </div>
      <div class="metric-card">
       <div class="metric-title">
        ‚öóÔ∏è pH Level
       </div>
       <div class="metric-display"><span class="metric-value" id="ph-val">8.2</span> <span style="font-size: 11px; color: #80deea;">pH</span>
       </div>
       <div class="metric-bar-container">
        <div class="metric-bar bar-excellent" id="ph-bar" style="width: 53.8462%;"></div>
       </div>
      </div>
      <div class="metric-card">
       <div class="metric-title">
        üîÑ Filter Status
       </div>
       <div class="metric-display"><span class="metric-value" id="filter-val">Clean</span>
       </div>
       <div class="metric-bar-container">
        <div class="metric-bar bar-excellent" id="filter-bar" style="width: 100%"></div>
       </div>
      </div>
     </div>
    </div>
    <div class="control-panel">
     <div class="actions-container">
      <h2 class="actions-title">‚öôÔ∏è ACTIONS</h2>
     <b> <div class="action-grid"><button class="action-button" id="action-climate"> <span class="action-icon">üå°Ô∏è</span> <span>
        Adjust Climate</span> <span class="action-cost">$30</span> </button> <button class="action-button" id="action-feed"> 
          <span class="action-icon">üêü</span> <span>Feed Animals</span> <span class="action-cost">$20</span> 
          </button> <button class="action-button" id="action-clean"> <span class="action-icon">üßπ</span> 
            <span>Clean Tank</span> <span class="action-cost">$25</span> </button> <button class="action-button" id="action-enrich">
               <span class="action-icon">üå±</span> <span>Add Enrichment</span> <span class="action-cost">$40</span> </button> 
               <button class="action-button" id="action-repair"> <span class="action-icon">üîß</span> <span>Repair Equipment</span>
                 <span class="action-cost">$50</span> </button> <button class="action-button" id="action-filter"> 
                  <span class="action-icon">üíß</span> <span>Backwash Filter</span> <span class="action-cost">$35</span> 
                  </button> <button class="action-button day-advance-btn" id="action-end-day"> 
                    <span class="action-icon">‚è≠Ô∏è</span> <span>END DAY</span><span>$15</span> </button></b>
      </div>
     </div>
     <div class="log-container">
      <h3 class="log-title">üìã Event Log</h3>
      <div class="log-messages" id="log-messages"><div class="log-message log-info">üí° Marine Rule #2:
         Overfeeding has 20% chance to spike ammonia!</div><div class="log-message log-info">üí° Marine Rule #1:
           Filter needs backwash every 3 days or oxygen drops!</div><div class="log-message log-info">
            üéÆ Welcome to Marine Aquarium Simulator! Survive 5 days with Comfort ‚â•70 and Health ‚â•70.
  
  </div>
  <div class="modal-overlay" id="game-over-modal">
   <div class="modal-content" id="modal-content">
    <h2 class="modal-title" id="modal-title">Game Over</h2>
    <p class="modal-text" id="modal-message">Your aquarium adventure has ended.</p><button class="modal-button" id="restart-button">Play Again</button>
   </div>
  </div>
  <script>
    const defaultConfig = {
      game_title: "üåä MARINE AQUARIUM SIMULATOR üåä",
      win_message: "Expert Aquarist! Your reef thrives!",
      lose_message: "The reef has collapsed..."
    };

    let config = { ...defaultConfig };

    // Game state using class-based approach
    class AquariumGame {
      constructor() {
        this.state = {
          day: 1,
          budget: 200,
          comfort: 75,
          health: 75,
          cleanliness: 80,
          salinity: 35.0,
          oxygen: 7.0,
          ammonia: 0.1,
          temperature: 25,
          ph: 8.2,
          filterCycles: 0,
          enrichmentActive: false,
          lowComfortDays: 0,
          isGameOver: false,
          isVictory: false
        };

        this.UPKEEP_COST = 15;
        this.IDEAL_RANGES = {
          salinity: { min: 33, max: 37, weight: 1.5 },
          oxygen: { min: 6.5, max: 8.0, weight: 2 },
          ammonia: { min: 0, max: 0.2, weight: 3 },
          temperature: { min: 24, max: 28, weight: 1 },
          ph: { min: 8.0, max: 8.4, weight: 1.5 }
        };

        this.creatures = [];
        this.particles = [];
      }

      init() {
        this.setupAquarium();
        this.setupEventListeners();
        this.updateDisplay();
        this.logMessage("üéÆ Welcome to Marine Aquarium Simulator! Survive 5 days with Comfort ‚â•70 and Health ‚â•70.", "info");
        this.logMessage("üí° Marine Rule #1: Filter needs backwash every 3 days or oxygen drops!", "info");
        this.logMessage("üí° Marine Rule #2: Overfeeding has 20% chance to spike ammonia!", "info");
        this.startAnimations();
      }

      setupAquarium() {
        const tank = document.getElementById('aquarium');
        
        // Add rocks
        for (let i = 0; i < 4; i++) {
          const rock = document.createElement('div');
          rock.className = 'rock';
          rock.textContent = '‚ö´';
          rock.style.left = `${15 + i * 25}%`;
          tank.appendChild(rock);
        }

        // Add plants/coral
        const plantEmojis = ['üåø', 'üçÉ', 'üå±'];
        for (let i = 0; i < 5; i++) {
          const plant = document.createElement('div');
          plant.className = 'plant';
          plant.textContent = plantEmojis[Math.floor(Math.random() * plantEmojis.length)];
          plant.style.left = `${10 + i * 18}%`;
          plant.style.animationDelay = `${i * 0.5}s`;
          tank.appendChild(plant);
        }

        // Add fish
        const fishTypes = ['üê†', 'üêü', 'üê°', 'ü¶à', 'üêô'];
        for (let i = 0; i < 5; i++) {
          const fish = document.createElement('div');
          fish.className = 'creature';
          fish.textContent = fishTypes[i % fishTypes.length];
          fish.dataset.index = i;
          
          const initialX = Math.random() * 80 + 10;
          const initialY = Math.random() * 250 + 50;
          
          fish.style.left = `${initialX}%`;
          fish.style.top = `${initialY}px`;
          
          fish.addEventListener('click', () => this.onCreatureClick(i));
          
          tank.appendChild(fish);
          
          this.creatures.push({
            element: fish,
            x: initialX,
            y: initialY,
            vx: (Math.random() - 0.5) * 2,
            vy: (Math.random() - 0.5) * 1
          });
        }

        // Add bubbles
        for (let i = 0; i < 8; i++) {
          setTimeout(() => this.createParticle(), i * 500);
        }
      }

      createParticle() {
        if (this.state.isGameOver) return;

        const tank = document.getElementById('aquarium');
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = `${Math.random() * 90 + 5}%`;
        particle.style.bottom = '0';
        particle.style.animationDuration = `${3 + Math.random() * 2}s`;
        tank.appendChild(particle);

        setTimeout(() => {
          if (particle.parentNode) {
            particle.parentNode.removeChild(particle);
          }
          this.createParticle();
        }, 4000);
      }

      onCreatureClick(index) {
        this.logMessage(`üê† You interacted with creature #${index + 1}! It seems happy!`, "success");
        this.state.comfort = Math.min(100, this.state.comfort + 1);
        this.updateDisplay();
      }

      startAnimations() {
        const animate = () => {
          if (this.state.isGameOver) return;

          this.creatures.forEach(creature => {
            creature.x += creature.vx * 0.3;
            creature.y += creature.vy * 0.3;

            if (creature.x < 5 || creature.x > 90) creature.vx *= -1;
            if (creature.y < 30 || creature.y > 320) creature.vy *= -1;

            creature.element.style.left = `${creature.x}%`;
            creature.element.style.top = `${creature.y}px`;
          });

          requestAnimationFrame(animate);
        };
        animate();
      }

      setupEventListeners() {
        document.getElementById('action-climate').addEventListener('click', () => this.performAction('climate', 30));
        document.getElementById('action-feed').addEventListener('click', () => this.performAction('feed', 20));
        document.getElementById('action-clean').addEventListener('click', () => this.performAction('clean', 25));
        document.getElementById('action-enrich').addEventListener('click', () => this.performAction('enrich', 40));
        document.getElementById('action-repair').addEventListener('click', () => this.performAction('repair', 50));
        document.getElementById('action-filter').addEventListener('click', () => this.performAction('filter', 35));
        document.getElementById('action-end-day').addEventListener('click', () => this.endDay());
        document.getElementById('restart-button').addEventListener('click', () => this.restart());
      }

      performAction(actionType, cost) {
        if (this.state.budget < cost) {
          this.logMessage(`‚ùå Not enough budget! Need $${cost}.`, "danger");
          return;
        }

        this.state.budget -= cost;

        switch(actionType) {
          case 'climate':
            this.state.temperature = 25 + (Math.random() - 0.5) * 0.8;
            this.state.salinity = 35 + (Math.random() - 0.5) * 0.8;
            this.logMessage("üå°Ô∏è Climate adjusted to optimal levels!", "success");
            break;

          case 'feed':
            this.state.comfort += 3;
            if (Math.random() < 0.2) {
              this.state.ammonia += 0.3;
              this.logMessage("üêü Animals fed but overfeeding detected! Ammonia spiked!", "warning");
            } else {
              this.logMessage("üêü Animals fed successfully!", "success");
            }
            break;

          case 'clean':
            this.state.cleanliness = Math.min(100, this.state.cleanliness + 25);
            this.state.ammonia = Math.max(0, this.state.ammonia - 0.2);
            this.logMessage("üßπ Tank thoroughly cleaned! Ammonia reduced.", "success");
            break;

          case 'enrich':
            this.state.comfort += 5;
            this.state.enrichmentActive = true;
            this.logMessage("üå± Environmental enrichment added! Animals exploring happily!", "success");
            break;

          case 'repair':
            this.state.oxygen = 7.0;
            this.state.temperature = 25;
            this.logMessage("üîß Equipment repaired and recalibrated!", "success");
            break;

          case 'filter':
            this.state.filterCycles = 0;
            this.state.oxygen = Math.min(8.0, this.state.oxygen + 0.5);
            this.state.cleanliness = Math.min(100, this.state.cleanliness + 10);
            this.logMessage("üíß Filter backwashed! Water clarity improved.", "success");
            break;
        }

        this.updateDisplay();
      }

      endDay() {
        this.state.budget -= this.UPKEEP_COST;
        
        const comfortChange = this.calculateComfortChange();
        this.state.comfort = Math.max(0, Math.min(100, this.state.comfort + comfortChange));
        
        this.state.health += (this.state.comfort - 70) / 20;
        this.state.health = Math.max(0, Math.min(100, this.state.health));
        
        this.state.cleanliness = Math.max(0, this.state.cleanliness - 8);
        this.state.oxygen = Math.max(5, this.state.oxygen - 0.2);
        this.state.ammonia = Math.min(1, this.state.ammonia + 0.05);
        
        this.state.filterCycles++;
        if (this.state.filterCycles >= 3) {
          this.state.oxygen -= 0.5;
          this.logMessage("‚ö†Ô∏è Filter clogged! Oxygen decreased. Backwash needed!", "warning");
        }
        
        this.triggerRandomEvent();
        
        if (this.state.comfort < 40) {
          this.state.lowComfortDays++;
        } else {
          this.state.lowComfortDays = 0;
        }
        
        this.state.day++;
        this.state.enrichmentActive = false;
        
        this.logMessage(`üìÖ Day ${this.state.day - 1} ended. Daily upkeep: -$${this.UPKEEP_COST}`, "info");
        
        this.checkGameEnd();
        this.updateDisplay();
      }

      calculateComfortChange() {
        let change = 2;
        
        const metrics = {
          salinity: this.state.salinity,
          oxygen: this.state.oxygen,
          ammonia: this.state.ammonia,
          temperature: this.state.temperature,
          ph: this.state.ph
        };

        for (const [metric, value] of Object.entries(metrics)) {
          const range = this.IDEAL_RANGES[metric];
          if (value >= range.min && value <= range.max) {
            change += 1;
          } else {
            const distance = Math.min(
              Math.abs(value - range.min),
              Math.abs(value - range.max)
            );
            change -= distance * range.weight;
          }
        }
        
        if (this.state.cleanliness < 50) change -= 2;
        if (this.state.enrichmentActive) change += 1;
        
        return change;
      }

      triggerRandomEvent() {
        if (Math.random() > 0.6) return;

        const events = [
          {
            name: "Storm Surge",
            effect: () => {
              this.state.salinity += 1.5;
              this.state.cleanliness -= 12;
              this.logMessage("‚õàÔ∏è Storm surge affected water parameters!", "warning");
            }
          },
          {
            name: "Beneficial Bacteria",
            effect: () => {
              this.state.ammonia = Math.max(0, this.state.ammonia - 0.15);
              this.logMessage("ü¶† Beneficial bacteria colony thriving! Ammonia neutralized.", "success");
            }
          },
          {
            name: "Equipment Sponsorship",
            effect: () => {
              this.state.budget += 40;
              this.logMessage("üí∞ Equipment sponsorship received! +$40", "success");
            }
          },
          {
            name: "Algae Outbreak",
            effect: () => {
              this.state.oxygen -= 1.0;
              this.state.cleanliness -= 18;
              this.state.ph -= 0.25;
              this.logMessage("ü¶† Algae outbreak! Multiple parameters affected!", "danger");
            }
          },
          {
            name: "Temperature Fluctuation",
            effect: () => {
              this.state.temperature += (Math.random() > 0.5 ? 2.5 : -2.5);
              this.state.comfort -= 5;
              this.logMessage("üå°Ô∏è Unexpected temperature swing!", "warning");
            }
          },
          {
            name: "Perfect Conditions",
            effect: () => {
              this.state.comfort += 8;
              this.state.health += 3;
              this.logMessage("‚ú® Perfect aquarium conditions! Animals thriving!", "success");
            }
          },
          {
            name: "pH Shock",
            effect: () => {
              this.state.ph += (Math.random() > 0.5 ? 0.4 : -0.4);
              this.state.comfort -= 4;
              this.logMessage("‚öóÔ∏è pH shock detected! Monitor carefully.", "warning");
            }
          },
          {
            name: "Oxygen Enrichment",
            effect: () => {
              this.state.oxygen = Math.min(8.0, this.state.oxygen + 0.8);
              this.logMessage("üí® Natural oxygen enrichment occurred!", "success");
            }
          }
        ];

        const event = events[Math.floor(Math.random() * events.length)];
        event.effect();
      }

      checkGameEnd() {
        // Check if salinity reached 0%
        if (this.state.salinity <= 0) {
          this.endGame(false, "CRITICAL: Salinity dropped to 0%! All marine life perished!");
          return;
        }
        
        // Check if oxygen reached 0%
        if (this.state.oxygen <= 0) {
          this.endGame(false, "CRITICAL: Oxygen depleted to 0%! Marine life suffocated!");
          return;
        }
        
        // Check if temperature is too extreme (below 0 or above extreme)
        if (this.state.temperature <= 0 || this.state.temperature >= 40) {
          this.endGame(false, "CRITICAL: Temperature reached lethal levels! All animals died!");
          return;
        }
        
        // Check if pH is too extreme (below 6 or above 10)
        if (this.state.ph <= 6.0 || this.state.ph >= 10.0) {
          this.endGame(false, "CRITICAL: pH reached toxic levels! Marine ecosystem collapsed!");
          return;
        }
        
        // Check if ammonia reached toxic levels (1.0 ppm = 100%)
        if (this.state.ammonia >= 1.0) {
          this.endGame(false, "CRITICAL: Ammonia poisoning at 100%! All animals died!");
          return;
        }
        
        // Check if filter is completely clogged (4+ cycles without backwash)
        if (this.state.filterCycles >= 4) {
          this.endGame(false, "CRITICAL: Filter completely failed! System shutdown!");
          return;
        }
        
        if (this.state.comfort <= 0 || this.state.health <= 0 || this.state.cleanliness <= 0) {
          this.endGame(false, "Critical metrics dropped to zero!");
          return;
        }
        
        if (this.state.lowComfortDays >= 3) {
          this.endGame(false, "Animal comfort remained too low for 3 consecutive days!");
          return;
        }
        
        if (this.state.budget < 0) {
          this.endGame(false, "Budget depleted completely!");
          return;
        }
        
        if (this.state.day > 5 && this.state.comfort >= 70 && this.state.health >= 70) {
          this.endGame(true, "Successfully maintained the aquarium for 5 days!");
          return;
        }
      }

      endGame(isVictory, reason) {
        this.state.isGameOver = true;
        this.state.isVictory = isVictory;

        const modal = document.getElementById('game-over-modal');
        const content = document.getElementById('modal-content');
        const title = document.getElementById('modal-title');
        const message = document.getElementById('modal-message');

        title.textContent = isVictory ? "üèÜ VICTORY! üèÜ" : "üíÄ GAME OVER üíÄ";
        
        const baseMessage = isVictory 
          ? config.win_message || defaultConfig.win_message
          : config.lose_message || defaultConfig.lose_message;
        
        message.textContent = `${baseMessage} ${reason}`;
        
        content.className = isVictory ? "modal-content victory" : "modal-content";
        modal.classList.add('active');
      }

      restart() {
        location.reload();
      }

      updateDisplay() {
        document.getElementById('day-display').textContent = this.state.day;
        document.getElementById('budget-display').textContent = `$${this.state.budget}`;
        document.getElementById('comfort-display').textContent = Math.round(this.state.comfort);
        document.getElementById('health-display').textContent = Math.round(this.state.health);
        document.getElementById('cleanliness-display').textContent = Math.round(this.state.cleanliness);

        this.updateMetric('salinity', this.state.salinity, 30, 40);
        this.updateMetric('oxygen', this.state.oxygen, 5, 10);
        this.updateMetric('ammonia', this.state.ammonia, 0, 1, true);
        this.updateMetric('temp', this.state.temperature, 20, 30);
        this.updateMetric('ph', this.state.ph, 7.5, 8.8);

        const filterStatus = this.state.filterCycles === 0 ? 'Clean' : 
                           this.state.filterCycles === 1 ? 'Good' :
                           this.state.filterCycles === 2 ? 'Needs Wash' : 'Clogged!';
        document.getElementById('filter-val').textContent = filterStatus;
        
        const filterBar = document.getElementById('filter-bar');
        const filterPercent = Math.max(0, 100 - (this.state.filterCycles * 33));
        filterBar.style.width = `${filterPercent}%`;
        filterBar.className = `metric-bar ${filterPercent > 66 ? 'bar-excellent' : filterPercent > 33 ? 'bar-warning' : 'bar-critical'}`;

        this.updateButtons();
      }

      updateMetric(name, value, min, max, inverse = false) {
        document.getElementById(`${name}-val`).textContent = value.toFixed(1);
        
        const percentage = ((value - min) / (max - min)) * 100;
        const bar = document.getElementById(`${name}-bar`);
        bar.style.width = `${Math.max(0, Math.min(100, percentage))}%`;

        let barClass = 'bar-excellent';
        
        if (name === 'ammonia') {
          if (value > 0.2) barClass = 'bar-critical';
          else if (value > 0.15) barClass = 'bar-warning';
          else if (value > 0.1) barClass = 'bar-good';
        } else {
          const range = this.IDEAL_RANGES[name] || { min: 0, max: 100 };
          if (value < range.min || value > range.max) {
            const distance = Math.min(Math.abs(value - range.min), Math.abs(value - range.max));
            barClass = distance > 1.5 ? 'bar-critical' : distance > 0.8 ? 'bar-warning' : 'bar-good';
          } else {
            barClass = 'bar-excellent';
          }
        }
        
        bar.className = `metric-bar ${barClass}`;
      }

      updateButtons() {
        const costs = {
          'action-climate': 30,
          'action-feed': 20,
          'action-clean': 25,
          'action-enrich': 40,
          'action-repair': 50,
          'action-filter': 35
        };

        for (const [id, cost] of Object.entries(costs)) {
          document.getElementById(id).disabled = this.state.budget < cost;
        }
      }

      logMessage(text, type = 'info') {
        const logContainer = document.getElementById('log-messages');
        const messageEl = document.createElement('div');
        messageEl.className = `log-message log-${type}`;
        messageEl.textContent = text;
        
        logContainer.insertBefore(messageEl, logContainer.firstChild);
        
        if (logContainer.children.length > 30) {
          logContainer.removeChild(logContainer.lastChild);
        }
      }
    }

    // Initialize game
    const game = new AquariumGame();
    
    async function onConfigChange(newConfig) {
      config = { ...config, ...newConfig };
      
      const titleElement = document.getElementById("game-title");
      if (titleElement) {
        titleElement.textContent = config.game_title || defaultConfig.game_title;
      }
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (config) => new Map([
          ["game_title", config.game_title || defaultConfig.game_title],
          ["win_message", config.win_message || defaultConfig.win_message],
          ["lose_message", config.lose_message || defaultConfig.lose_message]
        ])
      });

      window.elementSdk.setConfig(defaultConfig);
    }

    // Start the game
    game.init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a037a419412853f',t:'MTc2MzQyNzA2Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><iframe height="1" width="1" style="position: absolute; top: 0px; left: 0px; border: none; visibility: hidden;" src="./Untitled-1_files/saved_resource.html"></iframe><iframe height="1" width="1" style="position: absolute; top: 0px; left: 0px; border: none; visibility: hidden;" src="./Untitled-1_files/saved_resource(1).html"></iframe><iframe height="1" width="1" style="position: absolute; top: 0px; left: 0px; border: none; visibility: hidden;" src="./Untitled-1_files/saved_resource(2).html"></iframe>
</body></html>
